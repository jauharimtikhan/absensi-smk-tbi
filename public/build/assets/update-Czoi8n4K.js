import{v as j,r as b,j as e}from"./app-DI_7iOGi.js";import{C as f,c as g,e as _}from"./card-CRDQ6-HN.js";import{T as v,b as N,c as m,d as l,e as k,f as n}from"./table-DEct_Vxi.js";import{B as w}from"./button-form-CVGmifLz.js";import{S as C}from"./select2-CLxBKvX1.js";import"./button-ouBvtTzt.js";import"./loader-circle-BntIrtio.js";import"./select-OucRZLGt.js";import"./index-BGoB9TCs.js";import"./index-BdQq_4o_.js";import"./index-D1FKjugl.js";import"./index-ByiadMdx.js";import"./index-D7g85S3M.js";import"./Combination-KH8HP5zT.js";import"./index-Bh9eaD_H.js";import"./index-BlJ1_0NA.js";import"./index-DUUlX3oA.js";import"./index-1PqMr3ZH.js";import"./chevron-down-BACfvzZf.js";import"./check-5dKJEGSP.js";import"./chevron-up-SZJPr3au.js";import"./input-C3dI5ERP.js";import"./x-qbxLeAft.js";function W({dataSiswa:t,role:p}){var c;const i=j({selected_siswa:[]}),u=(s,a,d)=>{const r=i.data.selected_siswa.filter(x=>x.id_siswa!==s);r.push({id_siswa:s,status_absen:a,id_absensi:d}),i.setData("selected_siswa",r)},h=()=>{i.put(route("absensi.update"))},o=[{label:"Hadir",value:"hadir"},{label:"Alpa",value:"alpa"},{label:"Izin",value:"izin"},{label:"Sakit",value:"sakit"}];return b.useEffect(()=>{const s=t.data.map(a=>({id_siswa:String(a.siswa_id),status_absen:String(a.status),id_absensi:String(a.id)}));i.setData("selected_siswa",s)},[t]),e.jsxs(f,{className:"mt-4",children:[e.jsx(g,{className:"mt-3",children:((c=t==null?void 0:t.data)==null?void 0:c.length)>0?e.jsx("div",{className:"relative max-h-[300px] overflow-auto rounded border",children:e.jsxs(v,{children:[e.jsx(N,{children:e.jsxs(m,{className:"sticky top-0 z-50 bg-background shadow border",children:[e.jsx(l,{className:"w-[5%]",children:"Urut"}),e.jsx(l,{className:"w-[100px]",children:"No Induk"}),e.jsx(l,{className:"text-center",children:"Nama"}),e.jsx(l,{className:"w-[10%]",children:"L/P"}),e.jsx(l,{children:"Jurusan"}),e.jsx(l,{children:"Status"})]})}),e.jsx(k,{children:t.data.map((s,a)=>{var d;return e.jsxs(m,{children:[e.jsx(n,{children:a+1}),e.jsx(n,{children:s.siswa.nis}),e.jsx(n,{children:s.siswa.nama_lengkap}),e.jsx(n,{children:s.siswa.jenis_kelamin===null?"-":s.siswa.jenis_kelamin}),e.jsx(n,{children:s.siswa.jurusan}),e.jsx(n,{children:e.jsx(C,{options:p==="super-admin"?[...o,{label:"Telat",value:"telat"}]:o,onChange:r=>u(s.siswa.id.toString(),r,String(s.id)),value:((d=i.data.selected_siswa.find(r=>r.id_siswa===String(s.siswa.id)))==null?void 0:d.status_absen)||"",searchable:!1,placeholder:"Pilih Status Kehadiran Siswa"})})]},a)})})]})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tidak ada data siswa tersedia."})}),e.jsx(_,{children:e.jsx(w,{label:"Update Data Absensi",loading:i.processing,onClick:h})})]})}export{W as default};
