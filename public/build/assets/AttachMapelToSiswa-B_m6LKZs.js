import{r as o,v as y,j as i}from"./app-DNlvD2hl.js";import{C as _,a as D,b as N,c as v}from"./card-7vLESoGk.js";import{D as z}from"./raw-table-DaCTNp1F.js";import{S as E}from"./skeleton-DoNK-JLI.js";import{C as S}from"./checkbox-tSoI3-AN.js";import"./button-pRR0JN0m.js";import"./dropdown-menu-Bd8bW4D7.js";import"./index-C0NtTPSZ.js";import"./index-C-ccYaG7.js";import"./index-DegsW5sq.js";import"./index-C9shgPgY.js";import"./Combination-Cp1c0ah-.js";import"./index-DdSaT3RW.js";import"./index-B9CxhUDl.js";import"./index-4dDE89rF.js";import"./index-Bu8ztg0z.js";import"./chevron-right-Bw-z9g81.js";import"./check-D2eDAsCq.js";import"./table-Cg0z_YE3.js";import"./chevron-left-DIa6ZITS.js";import"./index-DjxcojDu.js";function Z({id_kelas:c,id_mapel:f,returnData:p}){const[t,x]=o.useState(void 0),[k,m]=o.useState(!1),[s,C]=o.useState([]),{setData:u}=y({selected_siswa:[]}),d=o.useCallback(async e=>{m(!0);try{const a=await window.axios.get(route("absensi.search.siswa.raw"),{params:{kelas:c,page:e}});a.status===200&&x(a.data.data)}catch(a){console.error("Error fetching siswa data:",a)}finally{m(!1)}},[c]),l=o.useCallback(e=>{C(e),u("selected_siswa",e),p(e)},[p,u]),h=o.useCallback(e=>{const a=s.filter(r=>!e.includes(r)).concat(e);l(a)},[s,l]),g=o.useCallback(e=>{const a=s.filter(r=>!e.includes(r));l(a)},[s,l]),w=o.useCallback((e,a)=>{const r=a?[...s,e]:s.filter(n=>n!==e);l(r)},[s,l]),b=o.useMemo(()=>[{id:"rowNumber",header:"No.",cell:({row:e})=>{if(!t)return"-";const a=t.current_page-1,r=t.per_page;return a*r+e.index+1},size:50},{accessorKey:"nis",header:"NIS",size:100},{accessorKey:"nama_lengkap",header:"Nama Lengkap",size:250},{id:"aksi",header:({table:e})=>{const a=e.getRowModel().rows.map(n=>n.original.id),r=a.every(n=>s.includes(n));return a.some(n=>s.includes(n)),i.jsx(S,{checked:r,onCheckedChange:n=>{n?h(a):g(a)},"aria-label":"Select all"})},size:50,cell:({row:e})=>{const a=e.original.id,r=s.includes(a);return i.jsx(S,{checked:r,onCheckedChange:n=>{w(a,!!n)},"aria-label":"Select row"})}}],[t,s,h,g,w]),j=o.useCallback(e=>{d(e)},[d]);return o.useEffect(()=>{c&&d()},[c,f,d]),i.jsxs(_,{children:[i.jsx(D,{children:i.jsx(N,{children:"Input Siswa ke Kelas dan Mata Pelajaran"})}),i.jsx(v,{children:k?i.jsx(E,{className:"h-[250px] w-full rounded-xl"}):t&&t.data.length>0?i.jsx(z,{data:t.data,columns:b,links:t.links,current_page:t.current_page,path:"absensi.search.siswa.raw",last_page:t.last_page,total:t.total,per_page:t.per_page,isJson:!0,handlePageChange:j}):i.jsx("div",{className:"text-center text-sm text-muted-foreground py-10",children:"Tidak ada data siswa yang ditemukan untuk kelas ini."})})]})}export{Z as default};
