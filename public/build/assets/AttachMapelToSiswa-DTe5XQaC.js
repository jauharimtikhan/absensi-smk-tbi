import{r as o,v as y,j as i}from"./app-C9tQhv_Z.js";import{C as _,a as D,b as N,c as v}from"./card-DShkTWeU.js";import{D as z}from"./raw-table-IFDfld6q.js";import{S as E}from"./skeleton-CbZi3YVn.js";import{C as S}from"./checkbox-CTS-OmBb.js";import"./button-CJTtMwL8.js";import"./dropdown-menu-Byz9-lBz.js";import"./index-CQA42a1l.js";import"./index-C5g0trgJ.js";import"./index-CwGbMlpu.js";import"./index-DFBKEqHs.js";import"./Combination-BC-g0I6C.js";import"./index-BTkG7Wq1.js";import"./index-af218OiE.js";import"./index-DRMvO1dW.js";import"./index-DiYJPi1s.js";import"./chevron-right-CNF1v_CZ.js";import"./check-BZ89noGP.js";import"./table-CCp73HfD.js";import"./chevron-left-mLpkzFX_.js";import"./index-DV3kUubK.js";function Z({id_kelas:c,id_mapel:f,returnData:p}){const[t,x]=o.useState(void 0),[k,m]=o.useState(!1),[s,C]=o.useState([]),{setData:u}=y({selected_siswa:[]}),d=o.useCallback(async e=>{m(!0);try{const a=await window.axios.get(route("absensi.search.siswa.raw"),{params:{kelas:c,page:e}});a.status===200&&x(a.data.data)}catch(a){console.error("Error fetching siswa data:",a)}finally{m(!1)}},[c]),l=o.useCallback(e=>{C(e),u("selected_siswa",e),p(e)},[p,u]),h=o.useCallback(e=>{const a=s.filter(r=>!e.includes(r)).concat(e);l(a)},[s,l]),g=o.useCallback(e=>{const a=s.filter(r=>!e.includes(r));l(a)},[s,l]),w=o.useCallback((e,a)=>{const r=a?[...s,e]:s.filter(n=>n!==e);l(r)},[s,l]),b=o.useMemo(()=>[{id:"rowNumber",header:"No.",cell:({row:e})=>{if(!t)return"-";const a=t.current_page-1,r=t.per_page;return a*r+e.index+1},size:50},{accessorKey:"nis",header:"NIS",size:100},{accessorKey:"nama_lengkap",header:"Nama Lengkap",size:250},{id:"aksi",header:({table:e})=>{const a=e.getRowModel().rows.map(n=>n.original.id),r=a.every(n=>s.includes(n));return a.some(n=>s.includes(n)),i.jsx(S,{checked:r,onCheckedChange:n=>{n?h(a):g(a)},"aria-label":"Select all"})},size:50,cell:({row:e})=>{const a=e.original.id,r=s.includes(a);return i.jsx(S,{checked:r,onCheckedChange:n=>{w(a,!!n)},"aria-label":"Select row"})}}],[t,s,h,g,w]),j=o.useCallback(e=>{d(e)},[d]);return o.useEffect(()=>{c&&d()},[c,f,d]),i.jsxs(_,{children:[i.jsx(D,{children:i.jsx(N,{children:"Input Siswa ke Kelas dan Mata Pelajaran"})}),i.jsx(v,{children:k?i.jsx(E,{className:"h-[250px] w-full rounded-xl"}):t&&t.data.length>0?i.jsx(z,{data:t.data,columns:b,links:t.links,current_page:t.current_page,path:"absensi.search.siswa.raw",last_page:t.last_page,total:t.total,per_page:t.per_page,isJson:!0,handlePageChange:j}):i.jsx("div",{className:"text-center text-sm text-muted-foreground py-10",children:"Tidak ada data siswa yang ditemukan untuk kelas ini."})})]})}export{Z as default};
