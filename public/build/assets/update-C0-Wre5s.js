import{v as j,r as b,j as e}from"./app-dtuUTQPg.js";import{C as f,c as g,e as _}from"./card-BA0s0Gic.js";import{T as v,b as N,c as m,d as l,e as k,f as n}from"./table-C01eE_yS.js";import{B as w}from"./button-form-Bq4WgXJU.js";import{S as C}from"./select2-BdmNQqEp.js";import"./button-DPsmANRN.js";import"./loader-circle-DUNaWJrS.js";import"./select-CHyngtyH.js";import"./index-ChTBRd0w.js";import"./index-BdQq_4o_.js";import"./index-DG6lS1av.js";import"./index-Cm6O-f5t.js";import"./index-BNtFQH6V.js";import"./Combination-DH0SttvD.js";import"./index-DkKg-NQ3.js";import"./index-D3ZdPiCk.js";import"./index-BO5XnkvU.js";import"./index-DzJ2E_zn.js";import"./chevron-down-WzJ1kcrw.js";import"./check-CwIqQT0W.js";import"./chevron-up-BoLhmJXO.js";import"./input-Drfy3CFD.js";import"./x-NVNAERGQ.js";function W({dataSiswa:t,role:p}){var c;const i=j({selected_siswa:[]}),u=(s,a,d)=>{const r=i.data.selected_siswa.filter(x=>x.id_siswa!==s);r.push({id_siswa:s,status_absen:a,id_absensi:d}),i.setData("selected_siswa",r)},h=()=>{i.put(route("absensi.update"))},o=[{label:"Hadir",value:"hadir"},{label:"Alpa",value:"alpa"},{label:"Izin",value:"izin"},{label:"Sakit",value:"sakit"}];return b.useEffect(()=>{const s=t.data.map(a=>({id_siswa:String(a.siswa_id),status_absen:String(a.status),id_absensi:String(a.id)}));i.setData("selected_siswa",s)},[t]),e.jsxs(f,{className:"mt-4",children:[e.jsx(g,{className:"mt-3",children:((c=t==null?void 0:t.data)==null?void 0:c.length)>0?e.jsx("div",{className:"relative max-h-[300px] overflow-auto rounded border",children:e.jsxs(v,{children:[e.jsx(N,{children:e.jsxs(m,{className:"sticky top-0 z-50 bg-background shadow border",children:[e.jsx(l,{className:"w-[5%]",children:"Urut"}),e.jsx(l,{className:"w-[100px]",children:"No Induk"}),e.jsx(l,{className:"text-center",children:"Nama"}),e.jsx(l,{className:"w-[10%]",children:"L/P"}),e.jsx(l,{children:"Jurusan"}),e.jsx(l,{children:"Status"})]})}),e.jsx(k,{children:t.data.map((s,a)=>{var d;return e.jsxs(m,{children:[e.jsx(n,{children:a+1}),e.jsx(n,{children:s.siswa.nis}),e.jsx(n,{children:s.siswa.nama_lengkap}),e.jsx(n,{children:s.siswa.jenis_kelamin===null?"-":s.siswa.jenis_kelamin}),e.jsx(n,{children:s.siswa.jurusan}),e.jsx(n,{children:e.jsx(C,{options:p==="super-admin"?[...o,{label:"Telat",value:"telat"}]:o,onChange:r=>u(s.siswa.id.toString(),r,String(s.id)),value:((d=i.data.selected_siswa.find(r=>r.id_siswa===String(s.siswa.id)))==null?void 0:d.status_absen)||"",searchable:!1,placeholder:"Pilih Status Kehadiran Siswa"})})]},a)})})]})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tidak ada data siswa tersedia."})}),e.jsx(_,{children:e.jsx(w,{label:"Update Data Absensi",loading:i.processing,onClick:h})})]})}export{W as default};
