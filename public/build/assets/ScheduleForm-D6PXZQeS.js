import{v as f,r as N,j as a}from"./app-dtuUTQPg.js";import{D as w,a as C,b as D,c as F}from"./dialog-BbXU5mrd.js";import{B as u}from"./button-DPsmANRN.js";import{L as t}from"./label-BDJwZ1Pj.js";import{I as _}from"./input-Drfy3CFD.js";import{S as n,a as j,b as o,c,d as h}from"./select-CHyngtyH.js";import{t as x}from"./index-DbTheDnJ.js";import"./index-B4q1E3Zk.js";import"./index-ChTBRd0w.js";import"./index-BNtFQH6V.js";import"./index-Cm6O-f5t.js";import"./Combination-DH0SttvD.js";import"./index-DRbEqTca.js";import"./x-NVNAERGQ.js";import"./index-BdQq_4o_.js";import"./index-DG6lS1av.js";import"./index-DkKg-NQ3.js";import"./index-D3ZdPiCk.js";import"./index-BO5XnkvU.js";import"./index-DzJ2E_zn.js";import"./chevron-down-WzJ1kcrw.js";import"./check-CwIqQT0W.js";import"./chevron-up-BoLhmJXO.js";const Z=({open:g,onClose:m,schedule:i,filterOptions:d})=>{const{data:l,setData:s,post:v,put:b,processing:p,errors:r,reset:S}=f({hari:"",jam_mulai:"",jam_selesai:"",mapel_id:0,guru_id:0,kelas_id:0});N.useEffect(()=>{i?s({hari:i.hari,jam_mulai:i.jam_mulai,jam_selesai:i.jam_selesai,mapel_id:i.mata_pelajarans.id,guru_id:i.guru.id,kelas_id:i.kelas.id}):S()},[i]);const k=e=>{e.preventDefault(),i?b(`/jadwal-kbm/${i.id}`,{onSuccess:()=>{x.success("Jadwal berhasil diperbarui"),m()},onError:()=>{x.error("Gagal memperbarui jadwal")}}):v("/jadwal-kbm",{onSuccess:()=>{x.success("Jadwal berhasil ditambahkan"),m()},onError:()=>{x.error("Gagal menambahkan jadwal")}})};return a.jsx(w,{open:g,onOpenChange:m,children:a.jsxs(C,{className:"sm:max-w-2xl",children:[a.jsx(D,{children:a.jsx(F,{children:i?"Edit Jadwal KBM":"Tambah Jadwal KBM"})}),a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx(t,{htmlFor:"hari",children:"Hari"}),a.jsxs(n,{value:l.hari,onValueChange:e=>s("hari",e),children:[a.jsx(j,{children:a.jsx(o,{placeholder:"Pilih Hari"})}),a.jsx(c,{children:d.hari.map(e=>a.jsx(h,{className:"capitalize",value:e,children:e},e))})]}),r.hari&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.hari})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"kelas_id",children:"Kelas"}),a.jsxs(n,{value:l.kelas_id.toString(),onValueChange:e=>s("kelas_id",parseInt(e)),children:[a.jsx(j,{children:a.jsx(o,{placeholder:"Pilih Kelas"})}),a.jsx(c,{children:d.kelas.map(e=>a.jsx(h,{value:e.id.toString(),children:e.nama_kelas},e.id))})]}),r.kelas_id&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.kelas_id})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"mapel_id",children:"Mata Pelajaran"}),a.jsxs(n,{value:l.mapel_id.toString(),onValueChange:e=>s("mapel_id",parseInt(e)),children:[a.jsx(j,{children:a.jsx(o,{placeholder:"Pilih Mata Pelajaran"})}),a.jsx(c,{children:d.mapel.map(e=>a.jsx(h,{value:e.id.toString(),children:e.nama_mapel},e.id))})]}),r.mapel_id&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.mapel_id})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"guru_id",children:"Guru"}),a.jsxs(n,{value:l.guru_id.toString(),onValueChange:e=>s("guru_id",parseInt(e)),children:[a.jsx(j,{children:a.jsx(o,{placeholder:"Pilih Guru"})}),a.jsx(c,{children:d.guru.map(e=>a.jsx(h,{value:e.id.toString(),children:e.nama},e.id))})]}),r.guru_id&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.guru_id})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"jam_mulai",children:"Waktu Mulai"}),a.jsx(_,{type:"time",id:"jam_mulai",value:l.jam_mulai,onChange:e=>s("jam_mulai",e.target.value)}),r.jam_mulai&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.jam_mulai})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"jam_selesai",children:"Waktu Selesai"}),a.jsx(_,{type:"time",id:"jam_selesai",value:l.jam_selesai,onChange:e=>s("jam_selesai",e.target.value)}),r.jam_selesai&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.jam_selesai})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(u,{type:"button",variant:"outline",onClick:m,disabled:p,children:"Batal"}),a.jsx(u,{type:"submit",disabled:p,children:p?"Menyimpan...":i?"Perbarui":"Simpan"})]})]})]})})};export{Z as default};
